var e=Object.defineProperty,t=(t,i,s)=>((t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s)(t,"symbol"!=typeof i?i+"":i,s);import{d as i,r as s,a as n,S as a,w as o,o as r,f as l,U as d,V as h,W as u,F as c,X as p,Y as m,B as y,Z as v,c as g,_ as x,u as b,$ as f,a0 as w,G as z,a1 as M,E as S,R as N}from"./@vue-DBpx-zj3.js";import{P as C,a as P,D as k,b as O,H as j,R as G,S as L,A as H,c as _,V,d as J,e as A,W as I,f as E,O as U,C as W,g as B,G as R,h as F,i as D,M as $,j as q,k as K,l as T,T as X,m as Y,n as Z,o as Q,p as ee,q as te,r as ie,s as se,t as ne,B as ae,u as oe,v as re,w as le,E as de,x as he}from"./three-nPBd7j9u.js";import{A as ue}from"./ant-design-vue-BIsS1SVr.js";import"./@babel-CaN1A-4H.js";import"./@ant-design-xLe7BKq7.js";import"./@ctrl-B2IeE8ye.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./@emotion-BqFXxR3o.js";import"./stylis-BXpgKhw9.js";import"./scroll-into-view-if-needed-NubnV8l_.js";import"./compute-scroll-into-view-DCNUDwgY.js";import"./vue-types-DUrkvkDc.js";import"./dom-align-CwhutA7q.js";import"./lodash-es-qFkpNywP.js";import"./dayjs-ClvOdu9v.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class ce{init(e,t,i){const s={type:"PointLight",x:0,y:0,z:0,color:16777215,intensity:1e4,distance:0,decay:2,shadowWidth:1024,shadowHeight:1024,shadowNear:.5,shadowFar:1e3,lightHelper:!1,...i};let n;switch(s.type){case"PointLight":n=new C(s.color,s.intensity,s.distance,s.decay),s.lightHelper&&e.add(new P(n,10));case"AmbientLight":n=new H(s.color,s.intensity);case"SpotLight":n=new L(s.color,s.intensity);case"RectAreaLight":n=new G(s.color,s.intensity);case"HemisphereLight":n=new j(s.color,s.color,s.intensity);case"DirectionalLight":n=new k(s.color,s.intensity),s.lightHelper&&e.add(new O(n,5));default:if(n=new C(s.color,s.intensity,s.distance,s.decay),s.lightHelper){const t=new P(n,10);e.add(t)}}n.position.set(s.x,s.y,s.z),n.castShadow=!0,e.add(n),n.shadow.mapSize.width=s.shadowWidth,n.shadow.mapSize.height=s.shadowHeight,n.shadow.camera.near=s.shadowNear,n.shadow.camera.far=s.shadowFar;const a=t.addFolder(s.type);return a.close(),a.add(n,"intensity",0,1e4,1),a.add(n.position,"x",-1e3,1e3,1),a.add(n.position,"y",-1e3,1e3,1),a.add(n.position,"z",-1e3,1e3,1),n}}class pe{constructor(e=new V(0,10,20)){t(this,"scene"),t(this,"camera"),t(this,"innerWidth"),t(this,"innerHeight"),t(this,"renderer"),t(this,"controls"),t(this,"clock"),t(this,"stats"),t(this,"gui"),t(this,"axesHelper",new _(150)),this.innerWidth=window.innerWidth,this.innerHeight=window.innerHeight,this.scene=new J,this.camera=new A(75,innerWidth/innerHeight,.1,2e3),this.camera.position.copy(e),this.renderer=new I({antialias:!0}),this.renderer.setSize(this.innerWidth,this.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=E,this.scene.add(this.axesHelper),this.controls=new U(this.camera,this.renderer.domElement),this.clock=new W,this.gui=new B,this.gui.close(),window.onresize=()=>{this.innerWidth=window.innerWidth,this.innerHeight=window.innerHeight,this.camera.aspect=this.innerWidth/this.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.innerWidth,this.innerHeight)}}gridHelper(e=1e3,t=10){var i;const s=new R(e,t);null==(i=this.scene)||i.add(s)}onResize(){this.camera.aspect=window.innerWidth/window.innerHeight}light(e={}){return(new ce).init(this.scene,this.gui,e)}init(e){const t=document.querySelector(e);null==t||t.appendChild(this.renderer.domElement),this.stats=new F,null==t||t.appendChild(this.stats.dom)}plane(){var e;const t=new D(100,100),i=new $({color:65280,side:q}),s=new K(t,i);s.rotation.x=Math.PI/2,null==(e=this.scene)||e.add(s)}destroy(){var e,t,i;null==(e=this.renderer)||e.dispose(),null==(t=this.scene)||t.traverse((e=>{var t;null==(t=this.scene)||t.remove(e)})),null==(i=this.camera)||i.remove()}}const me=e=>{De.config.globalProperties.$progressLoading.onProgress(e)},ye=()=>{De.config.globalProperties.$progressLoading.onShow()},ve=()=>{De.config.globalProperties.$progressLoading.onHide()};var ge=(e=>(e.BoxGeometry="BoxGeometry",e.ModelGlb="modelGlb",e.ModelGltf="modelGltf",e.Image="image",e.Video="video",e))(ge||{});class xe{constructor(){t(this,"lines",[]),t(this,"lineMap",new Map),t(this,"current",0),t(this,"oldUuid",""),t(this,"newUuid","")}add(e,t){this.lines.length&&(this.lines.length=this.current+1),this.lines.push({uuid:e,message:t}),this.current=this.lines.length-1}sort(e){let t={position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:0,y:0,z:0},size:{x:0,y:0,z:0},name:"",type:"BoxGeometry",url:"",visible:!1};const i=[];for(let s=0;s<this.lines.length;s++)this.lines[s].uuid===e?t=this.lines[s].message:i.push(this.lines[s]);i.push({uuid:e,message:t}),this.lines.length=0,this.lines.push(...i)}next(){return this.current<this.lines.length-1&&this.current++,this.newUuid=this.lines[this.current].uuid,this.lines[this.current]}prev(){return this.oldUuid=this.lines[this.current].uuid,this.current>0&&this.current--,this.lines[this.current]}removeChild(){return this.lines.slice(0,this.current+1).some((e=>e.uuid===this.oldUuid))?"":this.oldUuid}addChild(){return this.lines.slice(0,this.current+1).some((e=>e.uuid===this.newUuid))?this.newUuid:""}}const be=[{name:"图片",type:"image",url:"./texture/images/uv_grid_opengl.jpg",uuid:"c86649a1-5050-4325-be9a-f7fbf2eddc27",position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:2,y:1,z:1},size:{x:0,y:0,z:0},visible:!0},{name:"模型gltf",type:"modelGltf",url:"./texture/model/LeePerrySmith.glb",uuid:"fe841ffd-2b55-495d-b451-451afa7a503a",mixer:[],position:{x:14.653004919197528,y:-36.66009163661538,z:-20.043370080310176},rotation:{x:0,y:0,z:0},scale:{x:1,y:1.0000001192092896,z:1.0000001192092896},size:{x:0,y:0,z:0},visible:!0},{name:"视频",type:"video",url:"./texture/video/sintel.mp4",uuid:"80f1f56f-47de-43f9-8689-7f15f8fc268d",position:{x:-11.413523111868496,y:4.9940120911203865,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},size:{x:0,y:0,z:0},visible:!0},{name:"模型glb",type:"modelGlb",url:"./texture/model/Soldier.glb",uuid:"a813486e-ae40-4373-b154-fa65ede7323c",mixer:["Idle","Run","TPose","Walk"],position:{x:-13.37227955350931,y:0,z:0},rotation:{x:-1.5707962925663537,y:0,z:0},scale:{x:.009999999776482582,y:.009999999776482582,z:.009999999776482582},size:{x:0,y:0,z:0},visible:!0}],fe={class:"left"},we=["data-type","data-index"],ze=["data-type"],Me={class:"right"},Se={class:"tab-container"},Ne={class:"message"},Ce={class:"animation"},Pe=["data-name"],ke={class:"object-container"},Oe=["data-index","data-uuid","data-type"],je={class:"drag-container"},Ge=["data-type","data-url","data-name"],Le={key:0,class:"video-control"},He={class:"control-list"},_e={class:"restore-revoke"},Ve={class:"restore"},Je={class:"revoke"},Ae={class:"export"},Ie=(e,t)=>{const i=e.__vccOpts||e;for(const[s,n]of t)i[s]=n;return i},Ee=Ie(i({__name:"Index",setup(e){const i=new xe,M=s("0"),S=[{name:"模型glb",type:ge.ModelGlb,url:"./texture/model/Soldier.glb"},{name:"模型gltf",type:ge.ModelGltf,url:"./texture/model/LeePerrySmith.glb"},{name:"图片",type:ge.Image,url:"./texture/images/uv_grid_opengl.jpg"},{name:"视频",type:ge.Video,url:"./texture/video/sintel.mp4"}],N=s(-1);let C=0;const P=[{type:"translate",name:"移动"},{type:"scale",name:"缩放"},{type:"rotate",name:"旋转"}],k=[{type:"delete",name:"删除"}],O=s(!1),j=s(-1),G=n({position:{type:"position",x:0,y:0,z:0},rotation:{type:"rotation",x:0,y:0,z:0},scale:{type:"scale",x:0,y:0,z:0}});let L="";const H=n([]),_=s(-1);let J="";const A=a([]),I=s(""),E=e=>{var t;A.length=0,(null==(t=H[e])?void 0:t.mixer)&&A.push(...H[e].mixer)},U=s(),W=s(),B={name:"",type:"BoxGeometry",url:""},R=s(!1),F=s(!1),ue=s(!0);s(0);const ce=new class extends pe{constructor(){super(),t(this,"meshGroup",new Z),t(this,"raycasting",new Q),t(this,"pointer",new ee),t(this,"transformControls"),t(this,"selectGroup",new Z),t(this,"selectMesh"),t(this,"gizmo"),t(this,"mixer"),t(this,"modelList",new Z),t(this,"mixerArray",[]),t(this,"prev",(()=>{const e=i.prev();this.updateMeshMessage(e);const t=i.removeChild();this.setMeshVisible(t,!1),this.restore(e.uuid)})),t(this,"next",(()=>{const e=i.next();this.updateMeshMessage(e);const t=i.addChild();this.setMeshVisible(t,!0)}))}load(){var e;this.init("#webgl");const t=new te(this.renderer);this.scene.background=new ie(3355443),this.scene.environment=t.fromScene(new se,.04).texture,null==(e=this.scene)||e.add(this.meshGroup,this.selectGroup),this.transformControls=new ne(this.camera,this.renderer.domElement),this.animate(),this.gridHelper(1e3,200),this.transformControls.addEventListener("dragging-changed",(e=>{this.controls.enabled=!e.value})),this.transformControls.addEventListener("dragging-changed",(e=>{Ie.value=e.value,e.value||(this.meshInformation(this.selectMesh).then((e=>{const t=H[_.value];this.addLine(t.uuid,JSON.parse(JSON.stringify(e.position)),JSON.parse(JSON.stringify({x:e.rotation.x,y:e.rotation.y,z:e.rotation.z})),JSON.parse(JSON.stringify(e.scale)),this.selectMesh.visible,{name:t.name,type:t.type,url:t.url})})),this.getSelectMeshInfo())})),this.transformControls.addEventListener("change",(e=>{})),window.addEventListener("click",(e=>{var t;this.pointer.x=e.clientX/this.innerWidth*2-1,this.pointer.y=-e.clientY/this.innerHeight*2+1,this.raycasting.setFromCamera(this.pointer,this.camera);const i=this.raycasting.intersectObjects(this.meshGroup.children);if(i.length){let e=i[0].object.uuid||"";if("SkinnedMesh"===i[0].object.type){const s=i[0].object,n=s.skeleton.bones[0];this.selectMesh=n,e=(null==(t=s.parent)?void 0:t.uuid)||"";const a=this.setSelectMeshIndex(e);this.setSelectMesh(this.meshGroup.children[a])}else this.selectMesh=i[0].object,this.setSelectMesh(this.selectMesh),this.setSelectMeshIndex(e),L=e;this.getSelectMeshInfo()}else-1==_.value&&this.gizmo}))}setMode(e){var t,i;(null==(t=this.transformControls)?void 0:t.object)&&(null==(i=this.transformControls)||i.setMode(e))}addObject(e){if(e.type===ge.BoxGeometry){const e=new $({color:16777215}),t=new ae(5,5,5),i=new K(t,e);i.position.set(0,2.5,0),this.meshGroup.add(i)}else e.type===ge.ModelGlb||e.type===ge.ModelGltf?this.addModel(e):e.type===ge.Image?this.addImage(e):e.type===ge.Video&&this.addVideo(e)}addModel(e){var t;(t=e.url,new Promise((e=>{ye(),(new T).load(t,(t=>{e(t),ve()}),(e=>{me(Number((e.total/e.loaded).toFixed(2)))}),(e=>{ve()}))}))).then((t=>{const i=t.scene.children[0];this.createAnimationMixer(t,i.uuid).then((t=>{this.setMeshListPush(e,i)})),this.meshGroup.add(i)}))}addImage(e){var t;(t=e.url,new Promise((e=>{ye(),(new X).load(t,(t=>{const{width:i,height:s}=t.source.data;e({width:i,height:s,texture:t}),ve()}),(e=>{me(Number((e.total/e.loaded).toFixed(2)))}),(e=>{ve()}))}))).then((t=>{const{width:i,height:s,texture:n}=t,a=new D(10,10*s/i),o=new $({map:n,side:q,transparent:!0}),r=new K(a,o);this.meshGroup.add(r),this.setMeshListPush(e,r)}))}addVideo(e){var t;(t=e.url,new Promise((e=>{ye();const i=document.createElement("video");i.src=t,i.crossOrigin="Anonymous",i.loop=!0,i.muted=!0,i.pause(),i.onloadeddata=()=>{ve();const t=new Y(i),{videoWidth:s,videoHeight:n}=i;e({videoWidth:s,videoHeight:n,texture:t})},i.onerror=()=>{ve()}}))).then((t=>{const{videoWidth:i,videoHeight:s,texture:n}=t,a=new D(10,10*s/i),o=new $({map:n,side:q,transparent:!0}),r=new K(a,o);this.meshGroup.add(r),this.setMeshListPush(e,r)}))}setMeshListPush(e,t){let i;e.uuid?i=this.setMeshMatrix(t,e):(i=t,this.addLine(i.uuid,i.position,i.rotation,i.scale,i.visible,e)),H.push({...e,uuid:i.uuid,position:i.position,rotation:{x:i.rotation.x,y:i.rotation.y,z:i.rotation.z},scale:i.scale,size:{x:0,y:0,z:0}})}lineSort(e,t){i.lines.length===t&&i.sort(e)}addLine(e,t,s,n,a,o){i.add(e,{position:JSON.parse(JSON.stringify(t)),rotation:JSON.parse(JSON.stringify(s)),scale:JSON.parse(JSON.stringify(n)),size:{x:0,y:0,z:0},visible:a,...o})}createAnimationMixer(e,t){return new Promise((i=>{if(e.animations.length){const s=e.scene,n=new oe(s),a=[];let o=[];e.animations.forEach((e=>{const t=n.clipAction(e);o.push(t),a.push(e.name)})),this.mixerArray.push({uuid:t,mixer:n,action:o}),i(a)}else i([])}))}playAnimation(e){this.mixerArray.forEach((t=>{t.uuid===J&&t.action.forEach(((t,i)=>{const s=t.getClip().name;s===e?(t.play(),I.value=s):t.stop()}))}))}getAnimationName(){this.mixerArray.forEach((e=>{e.uuid===J&&e.action.forEach(((e,t)=>{const i=e.getClip().name;e.isRunning()&&(I.value=i)}))}))}getSelectMeshInfo(){this.meshInformation(this.selectMesh),this.selectMesh instanceof re?this.getMeshSize(this.selectMesh.parent):this.getMeshSize(this.selectMesh)}meshInformation(e){return new Promise((t=>{G.position.x=e.position.x,G.position.y=e.position.y,G.position.z=e.position.z,G.rotation.x=e.rotation.x,G.rotation.y=e.rotation.y,G.rotation.z=e.rotation.z,G.scale.x=e.scale.x,G.scale.y=e.scale.y,G.scale.z=e.scale.z,t({position:e.position,rotation:e.rotation,scale:e.scale})}))}getMeshSize(e){return new Promise((t=>{if(e.children.length)e.traverse((e=>{if(e instanceof K){e.geometry.computeBoundingBox();const{max:t,min:i}=e.geometry.boundingBox||{max:new V,min:new V};(new le).setFromPoints([i,t]).getSize(new V)}}));else{e.geometry.computeBoundingBox();const{max:t,min:i}=e.geometry.boundingBox||{max:new V,min:new V};(new le).setFromPoints([i,t]).getSize(new V)}}))}setMeshMatrix(e,t){return e.position.copy(new V(t.position.x,t.position.y,t.position.z)),e.rotation.copy(new de(t.rotation.x,t.rotation.y,t.rotation.z)),e.scale.copy(new V(t.scale.x,t.scale.y,t.scale.z)),e}setMeshPosition(e){var t;null==(t=this.selectMesh)||t.position.copy(e)}setMeshRotate(e){var t;const{x:i,y:s,z:n}=e,a=new de(i,s,n);null==(t=this.selectMesh)||t.rotation.copy(a)}setMeshScale(e){var t;null==(t=this.selectMesh)||t.scale.copy(e)}setSelectMeshIndex(e){const t=_.value=H.findIndex((t=>t.uuid===e));return E(t),J=e,I.value="",this.getAnimationName(),this.setVideoControlVisible(H[t].type),t}setSelectMesh(e){var t,i;let s;s="string"==typeof e?this.meshGroup.getObjectByProperty("uuid",e):(e.type,e),this.selectMesh=s,this.transformControls.attach(s),-1!==N.value&&this.transformControls.setMode(P[N.value].type),this.gizmo||(this.gizmo=null==(t=this.transformControls)?void 0:t.getHelper(),null==(i=this.scene)||i.add(this.gizmo)),N.value=C}moveTargetPosition(){var e,t;if(this.selectMesh){const i=new V(0,0,0).copy(this.selectMesh.position).subVectors(new V(0,10,20),this.selectMesh.position);this.camera.lookAt(0,0,0),this.camera.position.copy(i),null==(e=this.controls)||e.target.set(0,0,0),null==(t=this.controls)||t.update()}}remove(){var e;if(this.selectMesh){this.selectMesh.visible=!1,null==(e=this.transformControls)||e.detach();const t=H[_.value];t.visible=!1,_.value=-1,this.addLine(this.selectMesh.uuid,JSON.parse(JSON.stringify(this.selectMesh.position)),JSON.parse(JSON.stringify({x:this.selectMesh.rotation.x,y:this.selectMesh.rotation.y,z:this.selectMesh.rotation.z})),JSON.parse(JSON.stringify(this.selectMesh.scale)),this.selectMesh.visible,{name:t.name,type:t.type,url:t.url})}else alert("请选择几何体")}restore(e){H.forEach((t=>{t.uuid===e&&!1===t.visible&&(t.visible=!0)})),this.setMeshVisible(e,!0)}setMeshVisible(e,t){e&&this.meshGroup.traverse((i=>{i.uuid===e&&(i.visible=t)}))}updateMeshMessage(e){const{uuid:t,message:i}=e;this.meshGroup.traverse((e=>{e.uuid===t&&(e.position.copy(i.position),new V,e.rotation.copy(new de(i.rotation.x,i.rotation.y,i.rotation.z)),e.scale.copy(i.scale))}))}exportData(){}setVideoControlVisible(e){e===ge.Video?R.value=!0:R.value=!1}setVideoPlay(){var e;const t=null==(e=this.meshGroup.children[_.value].material.map)?void 0:e.source.data;t.paused?t.play():t.pause(),F.value=!t.paused}setVideoMuted(){var e;const t=null==(e=this.meshGroup.children[_.value].material.map)?void 0:e.source.data;t.muted=!t.muted,ue.value=t.muted}animate(){var e,t;if(null==(e=this.stats)||e.begin(),requestAnimationFrame((()=>{this.animate()})),he.update(),this.renderer.render(this.scene,this.camera),this.mixerArray.length){const e=this.clock.getDelta();this.mixerArray.forEach((t=>{t.mixer.update(e)}))}null==(t=this.stats)||t.end()}},Ie=s(!1);o(G,((e,t)=>{Ie.value||(ce.setMeshPosition(new V(Number(e.position.x),Number(e.position.y),Number(e.position.z))),ce.setMeshRotate(new V(Number(e.rotation.x),Number(e.rotation.y),Number(e.rotation.z))),ce.setMeshScale(new V(Number(e.scale.x),Number(e.scale.y),Number(e.scale.z))))}));const Ee=(e,t)=>{"position"===t?ce.setMeshPosition(new V(Number(G.position.x),Number(G.position.y),Number(G.position.z))):"rotation"===t?ce.setMeshRotate(new V(Number(G.rotation.x),Number(G.rotation.y),Number(G.rotation.z))):"scale"===t&&ce.setMeshScale(new V(Number(G.scale.x),Number(G.scale.y),Number(G.scale.z))),ce.addLine(H[_.value].uuid,JSON.parse(JSON.stringify(G.position)),JSON.parse(JSON.stringify(G.rotation)),JSON.parse(JSON.stringify(G.scale)),!0,{name:H[_.value].name,type:H[_.value].type,url:H[_.value].url})},Ue=e=>{const{dataset:t}=e.target;N.value=-1,"delete"===t.type?ce.remove():"targetPosition"===t.type?(ce.moveTargetPosition(),j.value=1!=j.value?1:-1):(ce.setMode(t.type),N.value=Number(t.index),C=Number(t.index))},We=e=>{const{dataset:t}=e.target;_.value=Number(t.index),ce.setSelectMesh(t.uuid),L=t.uuid||"",E(_.value),J=t.uuid,ce.getAnimationName(),ce.setVideoControlVisible(t.type)},Be=e=>{const{dataset:t}=e.target,i=t.name;ce.playAnimation(i)},Re=e=>{const{dataset:t}=e.target;B.name=t.name||"",B.type=t.type,B.url=t.url||"",Ie.value=!0},Fe=e=>{const t={uuid:"",position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:0,y:0,z:0},size:{x:0,y:0,z:0},name:B.name,type:B.type,url:B.url,visible:!0};ce.addObject(t),O.value=!0,Ie.value=!1};return r((()=>{ce.load(),O.value=!0;for(let e=0;e<be.length;e++)ce.addObject(be[e])})),l((()=>{ce.gui.close(),ce.gui.destroy()})),(e,t)=>{const i=d("a-input"),s=d("a-space"),n=d("a-tab-pane"),a=d("a-tabs"),o=d("a-button");return u(),h(c,null,[p("div",{id:"webgl",ref_key:"webglRef",ref:W,onDragover:t[0]||(t[0]=y((()=>{}),["prevent"])),onDrop:Fe},null,544),p("div",fe,[O.value?(u(),h("div",{key:0,class:"list",onClick:Ue},[(u(),h(c,null,v(P,((e,t)=>p("div",{class:f(["item",N.value==t?"active":""]),key:t,"data-type":e.type,"data-index":t},w(e.name),11,we))),64))])):m("",!0),O.value?(u(),h("div",{key:1,class:"list",onClick:Ue},[(u(),h(c,null,v(k,((e,t)=>p("div",{class:f(["item",j.value==t?"active":""]),key:t,"data-type":e.type},w(e.name),11,ze))),64))])):m("",!0)]),p("div",Me,[p("div",Se,[g(a,{activeKey:M.value,"onUpdate:activeKey":t[19]||(t[19]=e=>M.value=e),type:"card"},{default:x((()=>[g(n,{key:"0",tab:"对象设置"},{default:x((()=>[p("div",Ne,[g(s,{direction:"vertical"},{default:x((()=>[t[23]||(t[23]=p("h2",null,"位置",-1)),g(i,{prefix:"x：",value:G.position.x,"onUpdate:value":t[1]||(t[1]=e=>G.position.x=e),placeholder:"x",type:"number",disabled:-1==_.value,onChange:t[2]||(t[2]=e=>Ee(0,"position"))},null,8,["value","disabled"]),g(i,{prefix:"y：",value:G.position.y,"onUpdate:value":t[3]||(t[3]=e=>G.position.y=e),placeholder:"y",type:"number",disabled:-1==_.value,onChange:t[4]||(t[4]=e=>Ee(0,"position"))},null,8,["value","disabled"]),g(i,{prefix:"z：",value:G.position.z,"onUpdate:value":t[5]||(t[5]=e=>G.position.z=e),placeholder:"z",type:"number",disabled:-1==_.value,onChange:t[6]||(t[6]=e=>Ee(0,"position"))},null,8,["value","disabled"])])),_:1}),g(s,{direction:"vertical"},{default:x((()=>[t[24]||(t[24]=p("h2",null,"旋转",-1)),g(i,{prefix:"x：",value:G.rotation.x,"onUpdate:value":t[7]||(t[7]=e=>G.rotation.x=e),placeholder:"x",type:"number",disabled:-1==_.value,onChange:t[8]||(t[8]=e=>Ee(0,"rotation"))},null,8,["value","disabled"]),g(i,{prefix:"y：",value:G.rotation.y,"onUpdate:value":t[9]||(t[9]=e=>G.rotation.y=e),placeholder:"y",type:"number",disabled:-1==_.value,onChange:t[10]||(t[10]=e=>Ee(0,"rotation"))},null,8,["value","disabled"]),g(i,{prefix:"z：",value:G.rotation.z,"onUpdate:value":t[11]||(t[11]=e=>G.rotation.z=e),placeholder:"z",type:"number",disabled:-1==_.value,onChange:t[12]||(t[12]=e=>Ee(0,"rotation"))},null,8,["value","disabled"])])),_:1}),g(s,{direction:"vertical"},{default:x((()=>[t[25]||(t[25]=p("h2",null,"缩放",-1)),g(i,{prefix:"x：",value:G.scale.x,"onUpdate:value":t[13]||(t[13]=e=>G.scale.x=e),placeholder:"x",type:"number",disabled:-1==_.value,onChange:t[14]||(t[14]=e=>Ee(0,"scale"))},null,8,["value","disabled"]),g(i,{prefix:"y：",value:G.scale.y,"onUpdate:value":t[15]||(t[15]=e=>G.scale.y=e),placeholder:"y",type:"number",disabled:-1==_.value,onChange:t[16]||(t[16]=e=>Ee(0,"scale"))},null,8,["value","disabled"]),g(i,{prefix:"z：",value:G.scale.z,"onUpdate:value":t[17]||(t[17]=e=>G.scale.z=e),placeholder:"z",type:"number",disabled:-1==_.value,onChange:t[18]||(t[18]=e=>Ee(0,"scale"))},null,8,["value","disabled"])])),_:1})])])),_:1}),g(n,{key:"1",tab:"对象动画"},{default:x((()=>[p("div",Ce,[(u(!0),h(c,null,v(b(A),((e,t)=>(u(),h("div",{class:f(["item",I.value===e?"active":""]),key:e,"data-name":e,onClick:Be},w(e),11,Pe)))),128))])])),_:1})])),_:1},8,["activeKey"])]),p("div",ke,[t[26]||(t[26]=p("h1",null,"对象集合",-1)),p("div",{class:"object-list",onClick:We},[(u(!0),h(c,null,v(H,((e,t)=>(u(),h(c,{key:e.uuid},[e.visible?(u(),h("div",{key:0,class:f(["item",_.value===t?"active":""]),"data-index":t,"data-uuid":e.uuid,"data-type":e.type},w(e.name),11,Oe)):m("",!0)],64)))),128))])])]),p("div",je,[p("div",{class:"mesh",ref_key:"dragRef",ref:U},[(u(),h(c,null,v(S,((e,i)=>p("div",{class:"mesh-item",key:i,"data-type":e.type,"data-url":e.url,"data-name":e.name,draggable:"true",onDragover:t[20]||(t[20]=y((()=>{}),["prevent"])),onDragstart:Re},w(e.name),41,Ge))),64))],512)]),R.value?(u(),h("div",Le,[p("div",He,[p("div",{class:"item",onClick:t[21]||(t[21]=(...e)=>b(ce).setVideoPlay&&b(ce).setVideoPlay(...e))},[g(o,null,{default:x((()=>[z(w(F.value?"暂停":"播放"),1)])),_:1})]),p("div",{class:"item",onClick:t[22]||(t[22]=(...e)=>b(ce).setVideoMuted&&b(ce).setVideoMuted(...e))},[g(o,null,{default:x((()=>[z("静音（"+w(ue.value?"是":"否")+"）",1)])),_:1})])])])):m("",!0),p("div",_e,[p("div",Ve,[g(o,{onClick:b(ce).prev},{default:x((()=>t[27]||(t[27]=[z("上一步")]))),_:1},8,["onClick"])]),p("div",Je,[g(o,{onClick:b(ce).next},{default:x((()=>t[28]||(t[28]=[z("下一步")]))),_:1},8,["onClick"])]),p("div",Ae,[g(o,{onClick:b(ce).exportData},{default:x((()=>t[29]||(t[29]=[z("导出")]))),_:1},8,["onClick"])])])],64)}}}),[["__scopeId","data-v-8d52eff2"]]),Ue=i({__name:"App",setup:e=>(e,t)=>(u(),h("div",null,[g(Ee)]))}),We={key:0,class:"loading"},Be={class:"progress"},Re=Ie(i({__name:"ProgressLoading",setup(e,{expose:t}){const i=s(0),n=s(!1);return t({onShow:()=>{n.value=!0},onHide:()=>{n.value=!1},onProgress:e=>{i.value=e}}),(e,t)=>(u(),M(S,{to:"body"},[n.value?(u(),h("div",We,[p("div",Be,"加载进度..."+w(i.value)+"%",1)])):m("",!0)]))}}),[["__scopeId","data-v-12cf9b1b"]]),Fe={install(e){const t=document.createElement("div"),i=N(Re).mount(t);e.config.globalProperties.$progressLoading={onShow(){i.onShow()},onHide(){i.onHide()},onProgress(e){i.onProgress(e)}}}},De=N(Ue);De.use(ue),De.use(Fe),De.mount("#app");
